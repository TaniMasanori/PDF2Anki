### 6.2 Types (Conceptual Design)
```
ConversionMeta: {
  source_path: str,
  source_sha256: str,
  pages: int,
  engine: { name: str, version: str },
  elapsed_sec: float,
  created_at: str  # ISO 8601
}

ConversionResult: {
  markdown_path: str,
  meta_path: str,
  images_dir?: str
}

Chunk: {
  id: str,                  # e.g., chunk_0001
  text: str,
  start_page?: int,
  end_page?: int,
  section_title?: str,
  token_count: int,
  source_ref: { pdf_sha256: str, chunk_id: str }
}

Card: {
  question: str,
  answer: str,
  tags?: [str],
  source_ref?: { pdf_sha256: str, chunk_id?: str }
}
```

## 7. Cleaning and Chunking
### 7.1 Cleaning
- Format excess line breaks and consecutive whitespace
- Remove repetitive headers/footers (page numbers, etc.)
- Preserve mathematical expressions `$...$` / `$$...$$` (Anki MathJax assumption)
- Image references (`![]()`) are either retained or removed based on policy if unused in card generation

### 7.2 Chunking (Priority Order)
1) Split by section headings (`#`, `##`, etc.)
2) Split by token count limit (e.g., ~2k tokens)
3) Store chapter/section structure metadata in `Chunk.section_title`